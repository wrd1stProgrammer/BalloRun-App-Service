<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>탈퇴하기</title>
  <style>
    /* 전체 배경 및 기본 폰트 설정 */
    body {
      margin: 0;
      padding: 0;
      background-color: #f2f2f2; /* 화면 배경을 약간 연한 회색으로 설정(선택사항) */
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color: #1a1a1a;
    }

    /* 페이지의 콘텐츠를 중앙에 가로‧세로 정렬 */
    .wrapper {
      max-width: 400px;
      margin: 0 auto;
      background-color: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* 헤더 영역 */
    .header {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid #e5e5e5;
      background-color: #ffffff;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .header .back-button {
      border: none;
      background: none;
      font-size: 24px;
      cursor: pointer;
      color: #1a1a1a;
      line-height: 1;
      padding: 4px;
    }
    .header .title {
      flex: 1;
      text-align: center;
      font-size: 18px;
      font-weight: 700;
    }
    /* 뒤로 가기 버튼 오른쪽 여백 없애고, 타이틀 중앙 정렬 유지를 위해 */
    .header .placeholder {
      width: 32px; /* back-button과 같은 너비를 줘서 가운데 유지 */
    }

    /* 스크롤 가능한 본문 영역 */
    .content {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }

    /* Info 섹션 (둥근 모서리, 그림자) */
    .info-section {
      background-color: #ffffff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
    .info-section p {
      margin: 0 0 8px 0;
      line-height: 22px;
      font-size: 14px;
      color: #3c3c43;
    }

    /* Reason 섹션 */
    .reason-section {
      background-color: #ffffff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
    .reason-section .reason-title {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 12px;
    }
    .reason-section textarea {
      width: 100%;
      height: 120px;
      resize: none;
      padding: 12px;
      border: 1px solid #e5e5e5;
      border-radius: 8px;
      font-size: 14px;
      color: #1a1a1a;
      background-color: #f7f7f7;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
      outline: none;
      box-sizing: border-box;
      line-height: 18px;
    }
    .reason-section textarea::placeholder {
      color: #8e8e93;
    }
    .reason-section .char-count {
      text-align: right;
      font-size: 12px;
      color: #8e8e93;
      margin-top: 8px;
    }

    /* 제출 버튼 */
    .submit-button {
      width: 100%;
      background-color: #3384ff; /* 파란 계열 */
      border: none;
      border-radius: 8px;
      padding: 14px 0;
      font-size: 16px;
      font-weight: 600;
      color: #ffffff;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: opacity 0.2s;
    }
    .submit-button:disabled {
      background-color: #979797;
      opacity: 0.7;
      cursor: default;
      box-shadow: none;
    }

    /* 공통 알림 텍스트 */
    .notice {
      font-size: 14px;
      color: #3c3c43;
      margin-bottom: 20px;
      line-height: 20px;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- 1) 헤더 -->
    <div class="header">
      <!-- 뒤로 가기 버튼: 간단하게 × 기호를 사용 -->
      <button class="back-button" onclick="history.back()">×</button>
      <div class="title">탈퇴하기</div>
      <!-- 제목을 중앙 정렬 유지하기 위해 빈 공간 확보 -->
      <div class="placeholder"></div>
    </div>

    <!-- 2) 스크롤 가능한 콘텐츠 -->
    <div class="content">
      <!-- Info 섹션 -->
      <div class="info-section">
        <p><strong>홍길동</strong>님 떠나지 말아요..</p>
        <p>
          계정을 삭제하면 관련 모든 활동 기록이 7일 이내 삭제됩니다. 계정 삭제 후 3일 후 다시
          재가입 할 수 있어요.
        </p>
        <p><strong>홍길동</strong>님이 계정을 삭제하려는 이유가 궁금해요.</p>
      </div>

      <!-- Reason 섹션 -->
      <div class="reason-section">
        <div class="reason-title">탈퇴하시는 이유를 알려주세요.</div>
        <textarea
          id="reasonInput"
          maxlength="100"
          placeholder="탈퇴 사유를 입력해주세요 (100자 이내)"
        ></textarea>
        <div class="char-count" id="charCount">0/100</div>
      </div>

      <!-- 제출 버튼 -->
      <button
        id="submitBtn"
        class="submit-button"
        disabled
        onclick="onSubmitReason()"
      >
        제출
      </button>
    </div>
  </div>

  <script>
    // textarea 글자수 카운팅 및 버튼 활성화
    const reasonInput = document.getElementById("reasonInput");
    const charCount   = document.getElementById("charCount");
    const submitBtn   = document.getElementById("submitBtn");

    reasonInput.addEventListener("input", () => {
      const len = reasonInput.value.length;
      charCount.textContent = `${len}/100`;
      submitBtn.disabled = (len === 0);
    });

    function onSubmitReason() {
      const reason = reasonInput.value.trim();
      if (!reason) {
        alert("탈퇴 사유를 입력해주세요.");
        return;
      }
      const confirmed = confirm(
        "정말로 탈퇴하시겠습니까? 이 작업은 되돌릴 수 없습니다."
      );
      if (!confirmed) return;

      // 1) 폼을 직접 보내고 싶으면 아래처럼 동적 form 생성:
      const form = document.createElement("form");
      form.method = "POST";
      form.action = "/user/withdraw";
      // CSRF 토큰이 필요하면 숨겨진 <input>을 추가하세요.
      // const csrfInput = document.createElement("input");
      // csrfInput.type = "hidden";
      // csrfInput.name = "_csrf";
      // csrfInput.value = "여기에-CSRF-토큰";
      // form.appendChild(csrfInput);

      const reasonInputHidden = document.createElement("input");
      reasonInputHidden.type = "hidden";
      reasonInputHidden.name = "reason";
      reasonInputHidden.value = reason;
      form.appendChild(reasonInputHidden);

      document.body.appendChild(form);
      form.submit();
    }
  </script>
</body>
</html>
